
# 영속성 컨텍스트?
- 엔티티를 영구 저장하는 환경 : EntityManager.persist(entity);
- J2SE 환경: 엔티티 매니저와 영속성 컨텍스트가 1:1PersistenceContext
- J2EE, 스프링 프레임워크 같은 컨테이너 환경: 엔티티 매니저와 영속성 컨텍스트가 N:1

```java
//객체를 생성한 상태(비영속)
Member member = new Member();
member.setId("member1");
member.setUsername("회원1");

EntityManager em = emf.createEntityManager();
em.getTransaction().begin();
// 영속성 컨텍스트(emtityManager)가 member 객체를 저장한 상태(영속) - 1차 캐시
em.persist(member); 

// 영속성 컨텍스트에 있는 경우 - 영속성 컨텍스트 1차 캐시에서 조회
Member findMember = em.find(Member.class, "member1");

// 영속성 컨텍스트에 없는 경우 - db 에서 조회 후 영속성 컨텍스트 1차 캐시에 저장후 리턴 
Member findMember2 = em.find(Member.class, "member2");

 //회원 엔티티를 영속성 컨텍스트에서 분리, 준영속 상태 - 영속성 컨텍스트에서 삭제
 em.detache(member);

//객체를 삭제한 상태(삭제) - db에서 삭제
em.remove(member);
```

