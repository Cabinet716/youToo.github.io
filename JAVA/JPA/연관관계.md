
# 단방향 관계 

## Team : 1 
```java
Team team = new Team();
team.setName("Team1:);
```

## Member : N
```java
Member member = new Member();
member.setUserName("member1");
member.setTeam(Team); // 멤버의 팀을 셋팅 
em.persist(membber);
```
```java
class Member

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "team_id") // 외래키
private Team team; // 팀 조인 1:N
```


# 양방향 관계 

```java
class Team

@OneToMany(mappedBy = "team")
private List<Member> members = new ArrayList<>();
```
### mappedBy 
- 외래키가 있는 곳을 연관관계 주인으로 정하기 ! 
```
team.getMember().add(mmber); // 실제 DB insert 안됨. mappedBy는 read 전용, 그러나 1차캐시 됨
```

### 연관관계 편의 메소드1
- 양방향 관계인 경우 둘다 값을 넣어주기
```java
member.setTeam(Team); // 멤버에 팀을 셋팅하는 방법
//  team.getMember().add(mmber); // 여기서 팀의 멤버를 세팅 안하고 Member class 에서 셋팅
```
```java
class Member
private void changeTeam(Team team) { // setTeam 같은 의미이나 set & get 쓰지 않아야하는 경우
    this.team = team;
    team.getMembers().add(this);
}
```

### 연관관계 편의 메소드2
- 양방향 관계인 경우 둘다 값을 넣어주기
```java
team.addMember(member)' // 팀에 멤버를 셋팅하는 방법
//  member.setTeam(Team); // 멤버에 팀을 셋팅안하고 
//  team.getMember().add(mmber);
```
```java
class Team
public void addMember(Member member) {
    member.setTeam(this);
    members.add(member);
}
```

## 무한 루프 주의점
- lombok 의 toString() 사용 안한다.
- JSON 생성 라이브러리 : cont 에서 entity json 반환 하지 
